{% extends "controles/base.html"%}

{% block title %} Controles {% endblock %}

{% block content %} 
	<p>Controles para a sala {{ sala.description }}</p>
	{% if weather  %}
		<ul class="list-goup" sty>
			<li class="list-group-item">
			Umidade
				<span class="badge" id="umidade">{{ weather.umidade }} °</span>
			</li>	
			<li class="list-group-item">
			Temperatura
				<span class="badge" id="temperatura">{{ weather.temperatura }} °C</span>
			</li>
		</ul>
	{% endif%}
	{% if controles %}

			{% for controle in controles %}
			<div class="panel panel-default">
				  <div class="panel-heading">
				    <h3 class="panel-title">{{ controle.description }}</h3>
				  </div>
				  <div class="panel-body">
				    {% for comando in controle.comandos %}
						<button class="btn btn-default" onclick="sendComand('{{ comando.comando }}','{{ sala.NE }}')">{{ comando.description }}</button>
					{% endfor%}
				  </div>
				</div>
			{% endfor %}
	{% else %}
		<p>Não encontrei nenhum</p>
	{% endif %}
	{% if interuptores %}
		<div class="panel panel-default">
			<div class="panel-heading">
				    <h3 class="panel-title">Interuptores</h3></div>
				  <div class="panel-body">
		{% for inte in interuptores %}
		<div class="input-group" style="width:300px;">
			<span class="input-group-addon">
			<button class="btn btn-default" onclick="sendRele('{{ inte.porta }}?0','{{ sala.NE }}')">Desligar</button></span><h5 class="form-control">{{ inte.description }}</h5>
			<span class="input-group-addon">
			<button class="btn btn-default" onclick="sendRele('{{ inte.porta }}?1','{{ sala.NE }}')">Ligar</button></span>
		</div>
		{% endfor%}
		</div>
		</div>	
		<script type="text/javascript">
		window.onload = function(){
			setTimeout("getWeather('{{ sala.NE }}')",60000);		
		};
	</script>
	{% endif%}
{% endblock %}  


